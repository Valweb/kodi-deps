diff --git a/.gitignore b/.gitignore
index 119688d..c0f1d8c 100644
--- a/.gitignore
+++ b/.gitignore
@@ -1,7 +1,35 @@
-mDNSMacOSX/*.xcodeproj/project.xcworkspace
-mDNSMacOSX/*.xcodeproj/xcuserdata
-.svn
-build
-*~.m
-*~.c
-*~.h
+# Object files
+*.o
+*.ko
+*.obj
+*.elf
+
+# Precompiled Headers
+*.gch
+*.pch
+
+# Libraries
+*.lib
+*.a
+*.la
+*.lo
+
+# Shared objects (inc. Windows DLLs)
+*.dll
+*.so
+*.so.*
+*.dylib
+
+# Executables
+*.exe
+*.out
+*.app
+*.i*86
+*.x86_64
+*.hex
+
+# Debug files
+*.dSYM/
+*.su
+build/
+.vs/
diff --git a/CMakeLists.txt b/CMakeLists.txt
new file mode 100644
index 0000000..cfb4d77
--- /dev/null
+++ b/CMakeLists.txt
@@ -0,0 +1,86 @@
+cmake_minimum_required(VERSION 3.2)
+
+project(dnssd LANGUAGES C CXX)
+
+set(dnssd_VERSION 576.30.4)
+
+if(MSVC)
+  set(CMAKE_DEBUG_POSTFIX "d")
+endif()
+
+
+add_library(dnssd 
+  mDNSShared/CommonServices.h
+  mDNSShared/DebugServices.h
+  mDNSShared/DebugServices.c
+  mDNSShared/dns_sd.h
+  mDNSShared/dnssd_ipc.h
+  mDNSShared/dnssd_ipc.c
+  mDNSShared/dnssd_clientlib.c
+  mDNSShared/dnssd_clientstub.c
+  mDNSShared/GenLinkedList.h
+  mDNSShared/GenLinkedList.c
+  mDNSWindows/DLL/dll.rc
+  mDNSWindows/DLL/dllmain.c
+  mDNSWindows/DLL/dnssd.def
+  mDNSWindows/DLL/resource.h
+)
+target_include_directories(dnssd
+  PRIVATE
+  $<BUILD_INTERFACE:mDNSCore/;mDNSShared/;mDNSWindows/;mDNSWindows/DLL>
+  INTERFACE
+  $<INSTALL_INTERFACE:include>
+)
+
+target_compile_definitions(dnssd PRIVATE
+  _USRDLL
+  MDNS_DEBUGMSGS=0
+  WIN32_LEAN_AND_MEAN
+  USE_TCP_LOOPBACK
+  _CRT_SECURE_NO_DEPRECATE
+  _CRT_SECURE_CPP_OVERLOAD_STANDARD_NAMES=1
+  NOT_HAVE_SA_LEN
+)
+
+target_link_libraries(dnssd
+  PRIVATE ws2_32.lib)
+
+
+include(CMakePackageConfigHelpers)
+write_basic_package_version_file(
+  ${CMAKE_CURRENT_BINARY_DIR}/dnssd-config-version.cmake
+  VERSION ${dnssd_VERSION}
+  COMPATIBILITY AnyNewerVersion
+)
+
+install(TARGETS dnssd EXPORT dnssd
+  RUNTIME DESTINATION bin
+  ARCHIVE DESTINATION lib
+  LIBRARY DESTINATION lib)
+
+
+install(FILES
+  mDNSShared/dns_sd.h
+  DESTINATION include)
+
+install(EXPORT dnssd
+  FILE
+    dnssd.cmake
+  NAMESPACE
+    dnssd::
+  DESTINATION
+    lib/cmake/dnssd
+)
+install(
+  FILES
+    cmake/dnssd-config.cmake
+    ${CMAKE_CURRENT_BINARY_DIR}/dnssd-config-version.cmake
+  DESTINATION
+    lib/cmake/dnssd
+)
+
+if(MSVC AND BUILD_SHARED_LIBS)
+   install(FILES
+     $<TARGET_PDB_FILE:dnssd>
+     DESTINATION lib)
+endif()
\ No newline at end of file
diff --git a/cmake/dnssd-config.cmake b/cmake/dnssd-config.cmake
new file mode 100644
index 0000000..bdc210e
--- /dev/null
+++ b/cmake/dnssd-config.cmake
@@ -0,0 +1 @@
+include(${CMAKE_CURRENT_LIST_DIR}/dnssd.cmake)
\ No newline at end of file
diff --git a/mDNSShared/CommonServices.h b/mDNSShared/CommonServices.h
index 7fceac0..9871698 100644
--- a/mDNSShared/CommonServices.h
+++ b/mDNSShared/CommonServices.h
@@ -747,10 +747,12 @@ typedef int ssize_t;
 
     #define INT8_MIN                    SCHAR_MIN
 
-    #if ( defined( _MSC_VER ) )
 
 // C99 stdint.h not supported in VC++/VS.NET yet.
-
+#if _MSC_VER >= 1900
+#include <stdint.h>
+#endif
+#if _MSC_VER < 1900
 typedef INT8 int8_t;
 typedef UINT8 uint8_t;
 typedef INT16 int16_t;
@@ -765,6 +767,7 @@ typedef long long int64_t;
 typedef unsigned long long uint64_t;
     #endif
 
+#if _MSC_VER < 1900
 typedef int8_t int_least8_t;
 typedef int16_t int_least16_t;
 typedef int32_t int_least32_t;
@@ -784,7 +787,7 @@ typedef uint8_t uint_fast8_t;
 typedef uint16_t uint_fast16_t;
 typedef uint32_t uint_fast32_t;
 typedef uint64_t uint_fast64_t;
-
+#endif
     #if ( !defined( _MSC_VER ) || TARGET_OS_WINDOWS_CE )
 typedef long int intptr_t;
 typedef unsigned long int uintptr_t;
